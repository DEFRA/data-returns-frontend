(function(){if(!document.referrer&&(location.pathname!=="/index"&&location.pathname!=="/start")){document.location="/start"}function addEvent(node,type,callback){if(node.addEventListener){node.addEventListener(type,function(e){callback(e,e.target)},false)}else if(node.attachEvent){node.attachEvent("on"+type,function(e){callback(e,e.srcElement)})}}function addClickEvent(node,callback){var keydown=false;addEvent(node,"keydown",function(){keydown=true});addEvent(node,"keyup",function(e,target){keydown=false;if(e.keyCode===13){callback(e,target)}});addEvent(node,"click",function(e,target){if(!keydown){callback(e,target)}})}function getAncestor(node,match){do{if(!node||node.nodeName.toLowerCase()===match){break}}while(node=node.parentNode);return node}var started=false;function addDetailsPolyfill(list){var items=document.all;var counter=0;var title=location.pathname;for(var i=0;i<items.length;i++){var elem=items[i];if(!elem.id){elem.setAttribute("id","T-"+title+"-"+i)}counter++}if(started){return}started=true;if((list=document.getElementsByTagName("details")).length===0){return}var n=list.length,i=0;for(n;i<n;i++){var details=list[i];details.__native=typeof details.open=="boolean";details.__summary=details.getElementsByTagName("summary").item(0);details.__content=details.getElementsByTagName("div").item(0);if(!details.__content.id){details.__content.id="details-content-"+i}details.__summary.setAttribute("role","button");details.__summary.setAttribute("aria-controls",details.__content.id);details.__summary.setAttribute("tabindex","0");var detailsAttr=details.hasAttribute("open");if(typeof detailsAttr!=="undefined"&&detailsAttr!==false){details.__summary.setAttribute("aria-expanded","true");details.__content.setAttribute("aria-hidden","false")}else{details.__summary.setAttribute("aria-expanded","false");details.__content.setAttribute("aria-hidden","true");details.__content.style.display="none"}details.__summary.__details=details;if(!details.__native){var twisty=document.createElement("i");twisty.className="arrow arrow-closed";twisty.appendChild(document.createTextNode("►"));details.__summary.__twisty=details.__summary.insertBefore(twisty,details.__summary.firstChild)}}function statechange(summary){var expanded=summary.__details.__summary.getAttribute("aria-expanded")=="true";var hidden=summary.__details.__content.getAttribute("aria-hidden")=="true";summary.__details.__summary.setAttribute("aria-expanded",expanded?"false":"true");summary.__details.__content.setAttribute("aria-hidden",hidden?"false":"true");summary.__details.__content.style.display=expanded?"none":"block";if(summary.__twisty){summary.__twisty.firstChild.nodeValue=expanded?"►":"▼";summary.__twisty.setAttribute("class",expanded?"arrow arrow-closed":"arrow arrow-open")}return true}addClickEvent(document,function(e,summary){if(!(summary=getAncestor(summary,"summary"))){return true}return statechange(summary)})}addEvent(document,"DOMContentLoaded",addDetailsPolyfill);addEvent(window,"load",addDetailsPolyfill)})();$(document).on("change",".btn-file :file",function(){var input=$(this),numFiles=input.get(0).files?input.get(0).files.length:1,label;label=input.val().replace("C:\\fakepath\\","");label=label.replace(/\\/g,"/").replace(/.*\//,"");var f=input.get(0).files[0];$("#Validation-Summary").hide();$("#Validation-Summary-empty-file").hide();$("#Validation-Summary-not-csv-file").hide();if(f.size||f.fileSize){input.trigger("fileselect",[numFiles,label])}else{$("#remove-link").click();$("#Validation-Summary-empty-file").show()}});$("#uploadForm").submit(function(){$(".checking").show(0);$("#check-for-errors-btn").attr("disabled","disabled");$("#check-for-errors-btn").attr("aria-disabled",true)});$(document).ready(function(){$(".button-choose-file").addClass("btn btn-default btn-file button");$(".browse-text").show();$("#check-for-errors-btn").attr("disabled","disabled");$("#check-for-errors-btn").attr("aria-disabled",true);$("#file-select-button").attr("type","file");var existing=$(".btn-file :file").val();if(existing){existing=existing.replace("C:\\fakepath\\","");$(".btn-file :file").val().replace(/\\/g,"/").replace(/.*\//,"").replace("C:\\fakepath\\","")}if(existing!==""){$("#statusbar-header").show();$(".file-label").html(existing);$(".del-label").html('<a id="remove-link" href="#">Remove</a>');$("#check-for-errors-btn").removeAttr("disabled");$("#check-for-errors-btn").removeAttr("aria-disabled",true);$("#file-select-button").hide();$(".fancy-file-button").css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)",filter:"alpha(opacity=50)","-moz-opacity":"0.5","-khtml-opacity":"0.5",opacity:"0.5"});$("#remove-link").click(function(){$("#statusbar-header").hide();$("#check-for-errors-btn").attr("disabled","disabled");$("#check-for-errors-btn").attr("aria-disabled",true);$(".checking").hide(0);$("#file-select-button").show();$(".fancy-file-button").css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"alpha(opacity=100)","-moz-opacity":"1.0","-khtml-opacity":"1.0",opacity:"1.0"});var control=$("#file-select-button");control.replaceWith(control=control.clone(true))})}$(".btn-file :file").on("fileselect",function(event,numFiles,label){if(label!==""){$("#statusbar-header").show();$(".file-label").html(label);$(".del-label").html('<a id="remove-link" href="#">Remove file</a>');if($("input#checking_only").val()==="true"){$("#title").html("Confirm the file you want us to check")}else{$("#title").html("Confirm the file you want to send")}$("#check-for-errors-btn").removeAttr("disabled");$("#check-for-errors-btn").removeAttr("aria-disabled",true);$("#file-select-button").hide();$(".fancy-file-button").css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)",filter:"alpha(opacity=50)","-moz-opacity":"0.5","-khtml-opacity":"0.5",opacity:"0.5"});$("#remove-link").click(function(){$("#statusbar-header").hide();$("#loading-image").hide();if($("input#checking_only").val()==="true"){$("#title").html("Choose the file you want us to check")}else{$("#title").html("Choose the file you want to send")}$("#title").html("Choose the file you want us to check");$("#check-for-errors-btn").attr("disabled","disabled");$("#check-for-errors-btn").attr("aria-disabled",true);$("#file-select-button").show();$(".fancy-file-button").css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"alpha(opacity=100)","-moz-opacity":"1.0","-khtml-opacity":"1.0",opacity:"1.0"});var control=$("#file-select-button");control.replaceWith(control=control.clone(true))});if(!label.includes(".csv")){$("#remove-link").click();$("#Validation-Summary-not-csv-file").show()}}})});